{
	"StartAt": "EvaluateEventType",
	"States": {
		"EvaluateEventType": {
			"Type": "Choice",
			"Comment": "Evaluate and route the event types",
			"Choices": [
				{
					"Variable": "$.action",
					"StringEquals": "create",
					"Next": "CreateServer"
				},
				{
					"Variable": "$.action",
					"StringEquals": "terminate",
					"Next": "TerminateServer"
				}
			]
		},
		"CreateServer": {
			"Type": "Task",
			"Comment": "Create Jacktrip Server",
			"Resource": "${CreateServerFunctionArn}",
			"ResultPath": "$.taskResult",
			"Next": "WaitCreate"
		},
		"TerminateServer": {
			"Type": "Task",
			"Comment": "Terminate Jacktrip Server",
			"Resource": "${TerminateServerFunctionArn}",
			"ResultPath": "$.taskResult",
			"End": true
		},
		"WaitCreate": {
			"Type": "Wait",
			"SecondsPath": "$.waitTime",
			"Next": "PollInstanceStatus"
		},
		"GetServerStatus": {
			"Type": "Task",
			"Comment": "Check if instance is running",
			"Resource": "${GetServerStatusFunctionArn}",
			"End": true
		}
	}
}
